<!DOCTYPE html>
<html>
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>

  <body>
    <div id="myPlot" style="width: 100%; max-width: 700px"></div>
    {% for val in out_lst%}

    <p>{{val}}</p>

    {% endfor %}

    <script>
      // Define start and end dates
      var startDate = new Date("{{dates[0]}}");
      var endDate = new Date("{{dates[-1]}}");

      endDate.setDate(endDate.getDate() + 30);

      // Array to hold the dates within the range
      var dateRange = [];

      // Loop through the dates from start to end and push them to the array
      var currentDate = new Date(startDate);
      while (currentDate <= endDate) {
        dateRange.push(new Date(currentDate));
        currentDate.setDate(currentDate.getDate() + 1); // Increment to the next day
      }

      // Define Data
      const data = [
        {
          x: dateRange,
          y: {{pd}},
          mode: "lines",
        },
      ];

      // Define Layout
      const layout = {
        xaxis: { title: "Dates" },
        yaxis: { range: [1, 500], title: "Close Price" },
        title: "Stock historial with 30 days future data",
      };

      // Display using Plotly
      Plotly.newPlot("myPlot", data, layout);
    </script>
  </body>
</html>
